webpackJsonp([5],{G5U1:function(t,e,n){var a=n("nSZa");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("f0ff3eea",a,!0)},HV9S:function(t,e,n){var a=n("oSEw");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("1bb9247a",a,!0)},"IX+J":function(t,e,n){var a=n("OgAN");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("7a65aaf2",a,!0)},JHQ4:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.run-table .el-badge__content.is-fixed {\n   -webkit-transform: translateY(0%) translateX(100%) !important;\n           transform: translateY(0%) translateX(100%) !important;\n}\n",""])},OgAN:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n.more-bold {\n  font-weight: bolder;\n  cursor: pointer;\n  color: #36A3F7;\n}\n.more-fade {\n  color: #dbcdcd;\n}\n.list-icon {\n  font-size: 16px;\n}\n.alert {\n  color: #FF6E40;\n  font-weight: bolder;\n  /* background-color: #fef0f0; */\n}\n/* .el-tree-node {\n  padding: 5px;\n} */\n.el-tree-node__content {\n  height: 34px;\n}\n.custom-tree-node {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  /* align-items: center; */\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  font-size: 16px;\n  padding-right: 8px;\n}\n.node-time {\n  margin-right: 10px;\n  font-size: 14px;\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n}\n.clearfix:after {\n  clear: both\n}\n.tree-card .el-card__header {\n  /* padding-bottom: 0; */\n}\n.session-details {\n  margin-left: 20px;\n  opacity: 0.1;\n}\n.session-details:hover {\n  color: #0091EA\n}\n.el-tree-node__content:hover .session-details {\n  opacity: 1;\n}\n\n',""])},PahH:function(t,e,n){var a=n("lsd2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("c08a78f2",a,!0)},S9EM:function(t,e,n){var a=n("hhsj");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("a630b8a0",a,!0)},TaVA:function(t,e,n){var a=n("JHQ4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("21f6ebec",a,!0)},"Yw+i":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),r=n.n(a),i=n("M4fF"),o=n.n(i),s=n("NYxO"),l=n("zL8q"),c=n("PJh5"),d=n.n(c),u={data:function(){return{now:d()(),detailsClicked:!1}},created:function(){var t=this;setInterval(function(){t.now=new Date},1e3)},computed:r()({},Object(s.c)(["connection"]),Object(s.c)("loadPlanRun",["last","loadingLast"]),{lastRuns:function(){return this.last||[]},loading:function(){return this.loadingLast&&o.a.isEmpty(this.lastRuns)}}),methods:r()({},Object(s.b)("loadPlanRun",["sortLastRuns"]),{onSortChange:function(t){var e=t.prop,n=t.order;this.sortLastRuns({prop:e,order:n})},onSelectFilter:function(t,e,n){return e[n.property]===t},onDetails:function(t){this.detailsClicked=!0,this.connection?this.$emit("steps",t):l.Message.warning("No connection selected")},time:function(t){return t?d()(t).format("MMMM D hh:mm:ss a"):""},alertClassName:function(t){return this.duration(t.startTime,t.endTime)>this.avgDuration(t.avgDuration)?"alert":""},duration:function(t,e){e||(e=this.now);var n=d.a.duration(d()(e)-d()(t));return o.a.padStart(24*n.days()+n.hours(),2,0)+":"+o.a.padStart(n.minutes(),2,0)+":"+o.a.padStart(n.seconds(),2,0)},avgDuration:function(t){if(t){var e=d.a.duration(t);return o.a.padStart(24*e.days()+e.hours(),2,0)+":"+o.a.padStart(e.minutes(),2,0)+":"+o.a.padStart(e.seconds(),2,0)}},progressPct:function(t){switch(t.status){case"ERROR":case"DONE":return 100}var e=t.startTime,n=t.endTime?t.endTime:this.now,a=d.a.duration(d()(n)-d()(e)).asMilliseconds();return a>=t.avgDuration?99:parseFloat((100*a/t.avgDuration).toFixed(2))},progressStatus:function(t){switch(t.status){case"ERROR":return"exception";case"DONE":return"success"}return"default"},status:function(t,e){return{DONE:"success",RUNNING:"default",ERROR:"danger"}[t]},handleTableSelect:function(t){var e=this;t&&setTimeout(function(){e.detailsClicked||e.$emit("rowSelect",t),e.detailsClicked=!1},10)}})},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"run-table",staticStyle:{width:"100%","padding-top":"15px"},attrs:{data:t.lastRuns,"highlight-current-row":"highlight-current-row"},on:{"current-change":t.handleTableSelect,"sort-change":t.onSortChange}},[n("el-table-column",{attrs:{label:"Status",width:"100",align:"center",sortable:"sortable",prop:"status",filters:[{text:"DONE",value:"DONE"},{text:"ERROR",value:"ERROR"},{text:"RUNNING",value:"RUNNING"}],"filter-method":t.onSelectFilter},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.loadPlanInstance.runCount>1?n("el-badge",{staticClass:"item",attrs:{value:e.row.loadPlanInstance.runCount}},[n("el-tag",{attrs:{type:t.status(e.row.status)}},[t._v(" "+t._s(e.row.status))])],1):n("el-tag",{attrs:{type:t.status(e.row.status)}},[t._v(" "+t._s(e.row.status))])]}}])}),n("el-table-column",{attrs:{label:"Name","min-width":"200",sortable:"sortable",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.loadPlanInstance.name))]}}])}),n("el-table-column",{attrs:{label:"Start time","min-width":"200",sortable:"sortable",prop:"startTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.time(e.row.startTime)))]}}])}),n("el-table-column",{attrs:{label:"End time","min-width":"200",prop:"endTime",sortable:"sortable"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.time(e.row.endTime)))]}}])}),n("el-table-column",{attrs:{label:"Duration","min-width":"200",sortable:"sortable",prop:"duration"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:t.alertClassName(e.row)},[t._v(t._s(t.duration(e.row.startTime,e.row.endTime)))])]}}])}),n("el-table-column",{attrs:{label:"Average","min-width":"200",sortable:"sortable",prop:"avgDuration"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.avgDuration(e.row.avgDuration)))]}}])}),n("el-table-column",{attrs:{label:"Progress","min-width":"200",sortable:"sortable"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,status:t.progressStatus(e.row),percentage:t.progressPct(e.row)}})]}}])}),n("el-table-column",{attrs:{"max-width":"20",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{on:{click:function(n){t.onDetails(e.row)}}},[n("svg-icon",{attrs:{"icon-class":"list","class-name":"list-icon"}})],1)]}}])})],1)},staticRenderFns:[]};var p=n("VU/8")(u,h,!1,function(t){n("TaVA"),n("HV9S")},"data-v-4626d6de",null).exports,f=n("XLwt"),m=n.n(f),g=n("0xDb");n("tcAE");var v={props:{loadPlanRun:{type:Object,default:function(){}},hist:{type:Array,default:function(){return[]}},width:{type:String,default:"100%"},height:{type:String,default:"350px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.initChart(),this.__resizeHanlder=Object(g.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},watch:{loadPlanRun:function(){this.initChart(this.hist)}},methods:{initChart:function(t){this.chart=m.a.init(this.$el,"macarons");var e,n,a=[],r=[];t?(e=o.a.chain(t).filter(function(t){return"RUNNING"!==t.status}).sortBy(function(t){return t.startTime}).groupBy(function(t){return t.loadPlanInstance.internalId}).value(),n=o.a.chain(e).keys().map(function(t){return{startTime:e[t][0].startTime,duration:o.a.chain(e[t]).map(function(t){return t.duration}).sum().value()}}).value(),a=o.a.map(n,function(t){return d()(new Date(t.startTime)).format("YYYY.MM.DD")}),r=o.a.map(n,function(t){return m.a.number.round(t.duration/6e4,2)})):function(){for(var t=d()("07-01-2018","MM-DD-YYYY"),e=0;e<60;e++){var n=100*Math.random();a.push(t.add(e,"days").format("YYYY.MM.DD")),r.push(m.a.number.round(n,2))}}();var i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:[{type:"slider",start:55,end:100}],xAxis:{data:a,min:50},yAxis:{},series:[{type:"bar",name:"Duration(minutes) ",data:r,itemStyle:{normal:{color:"#77bef7"}},markLine:{symbol:["none","none"],data:[{lineStyle:{color:"#F56C6C"},name:"average duration",type:"average"},{lineStyle:{color:"#67C23A"},name:"minimum duration",type:"min"},{lineStyle:{color:"#F7BA2A"},name:"maximum duration",type:"max"}]},animationDuration:600}]};this.chart.setOption(i)}}},b={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height,width:this.width}})},staticRenderFns:[]},w=n("VU/8")(v,b,!1,null,null,null).exports;n("tcAE");var y={props:{loadPlanRun:{type:Object,default:function(){}},hist:{type:Array,default:function(){return[]}},width:{type:String,default:"100%"},height:{type:String,default:"400px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.initChart(this.hist),this.__resizeHanlder=Object(g.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},watch:{loadPlanRun:function(){this.initChart(this.hist)}},methods:{initChart:function(t){this.chart=m.a.init(this.$el,"macarons");var e,n,a=[];t?(e=o.a.chain(t).sortBy(function(t){return t.startTime}).groupBy(function(t){return t.loadPlanInstance.internalId}).value(),n=o.a.chain(e).keys().map(function(t){return{startTime:e[t][0].startTime,duration:o.a.chain(e[t]).map(function(t){return t.duration}).sum().value()}}).value(),a=n.map(function(t){return[d()(new Date(t.startTime)).format("YYYY-MM-DD"),m.a.number.round(t.duration/6e4,2)]})):function(){for(var t=d()("07-01-2017","MM-DD-YYYY"),e=0;e<500;e++){var n=1e3*Math.random();a.push([t.add(1,"days").format("YYYY-MM-DD"),m.a.number.round(n,2)])}}();var r={tooltip:{position:"top",formatter:function(t){return m.a.format.formatTime("yyyy-MM-dd",t.data[0])+": "+t.data[1]}},visualMap:{min:0,max:2e3,itemHeight:800,calculable:!0,orient:"horizontal",left:"center",top:"top"},calendar:[{range:"2018",cellSize:["auto",20]},{top:240,range:"2017",cellSize:["auto",20]}],series:[{type:"heatmap",coordinateSystem:"calendar",calendarIndex:0,data:a,animationDuration:600},{type:"heatmap",coordinateSystem:"calendar",calendarIndex:1,data:a,animationDuration:600}]};this.chart.setOption(r)}}},x={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height,width:this.width}})},staticRenderFns:[]},_=n("VU/8")(y,x,!1,null,null,null).exports,S={props:{data:{type:Array,required:!0}},data:function(){return{now:d()(),detailsClicked:!1}},created:function(){var t=this;setInterval(function(){t.now=new Date},1e3)},computed:r()({},Object(s.c)(["connection"])),methods:r()({},Object(s.b)("loadPlanRun",["sortLastRuns"]),{onSortChange:function(t){var e=t.prop,n=t.order;this.sortLastRuns({prop:e,order:n})},onSelectFilter:function(t,e,n){return e[n.property]===t},onDetails:function(t){this.detailsClicked=!0,this.connection?this.$emit("steps",t):l.Message.warning("No connection selected")},time:function(t){return t?d()(t).format("MMMM D hh:mm:ss a"):""},alertClassName:function(t){return this.duration(t.startTime,t.endTime)>this.avgDuration(t.avgDuration)?"alert":""},duration:function(t,e){e||(e=this.now);var n=d.a.duration(d()(e)-d()(t));return o.a.padStart(24*n.days()+n.hours(),2,0)+":"+o.a.padStart(n.minutes(),2,0)+":"+o.a.padStart(n.seconds(),2,0)},avgDuration:function(t){if(t){var e=d.a.duration(t);return o.a.padStart(24*e.days()+e.hours(),2,0)+":"+o.a.padStart(e.minutes(),2,0)+":"+o.a.padStart(e.seconds(),2,0)}},progressPct:function(t){switch(t.status){case"ERROR":case"DONE":return 100}var e=t.startTime,n=t.endTime?t.endTime:this.now,a=d.a.duration(d()(n)-d()(e)).asMilliseconds();return a>=t.avgDuration?99:parseFloat((100*a/t.avgDuration).toFixed(2))},progressStatus:function(t){switch(t.status){case"ERROR":return"exception";case"DONE":return"success"}return"default"},status:function(t,e){return{DONE:"success",RUNNING:"default",ERROR:"danger"}[t]},handleTableSelect:function(t){var e=this;t&&setTimeout(function(){e.detailsClicked||e.$emit("rowSelect",t),e.detailsClicked=!1},10)}})},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-table",{staticStyle:{width:"100%","padding-top":"15px"},attrs:{data:t.data,"highlight-current-row":"highlight-current-row"},on:{"current-change":t.handleTableSelect,"sort-change":t.onSortChange}},[n("el-table-column",{attrs:{label:"Status",width:"100",align:"center",sortable:"sortable",prop:"status",filters:[{text:"DONE",value:"DONE"},{text:"ERROR",value:"ERROR"},{text:"RUNNING",value:"RUNNING"}],"filter-method":t.onSelectFilter},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t.status(e.row.status)}},[t._v(" "+t._s(e.row.status))])]}}])}),n("el-table-column",{attrs:{label:"Start time","min-width":"200",sortable:"sortable",prop:"startTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.time(e.row.startTime)))]}}])}),n("el-table-column",{attrs:{label:"End time","min-width":"200",prop:"endTime",sortable:"sortable"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.time(e.row.endTime)))]}}])}),n("el-table-column",{attrs:{label:"Duration","min-width":"200",sortable:"sortable",prop:"duration"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:t.alertClassName(e.row)},[t._v(t._s(t.duration(e.row.startTime,e.row.endTime)))])]}}])}),n("el-table-column",{attrs:{label:"Average","min-width":"200",sortable:"sortable",prop:"avgDuration"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.avgDuration(e.row.avgDuration)))]}}])}),n("el-table-column",{attrs:{label:"Progress","min-width":"200",sortable:"sortable"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,status:t.progressStatus(e.row),percentage:t.progressPct(e.row)}})]}}])}),n("el-table-column",{attrs:{"max-width":"20",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{on:{click:function(n){t.onDetails(e.row)}}},[n("svg-icon",{attrs:{"icon-class":"list","class-name":"list-icon"}})],1)]}}])})],1),n("el-pagination",{staticClass:"pagination",attrs:{background:"background",layout:"prev, pager, next",total:t.data.length}})],1)},staticRenderFns:[]};var P=n("VU/8")(S,R,!1,function(t){n("S9EM")},"data-v-4f8a95e4",null).exports;n("tcAE");var D={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"400px"},loadPlans:{type:Array,default:function(){return[]}}},data:function(){return{chart:null}},mounted:function(){var t=this;this.initChart(),this.__resizeHanlder=Object(g.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},watch:{loadPlans:function(){this.initChart()}},methods:{initChart:function(){this.chart=m.a.init(this.$el,"macarons");var t=o.a.map(this.loadPlans,"name"),e=o.a.map(this.loadPlans,function(t){var e=t.avgDuration;return{name:t.name,value:e}});this.chart.setOption({title:{text:"Load Plan Avg. Durations"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:t},calculable:!0,series:[{top:60,name:"Durations in minutes",type:"pie",roseType:"radius",radius:[15,115],data:e,animationEasing:"cubicInOut",animationDuration:2600}]})}}},C={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height,width:this.width}})},staticRenderFns:[]},E=n("VU/8")(D,C,!1,null,null,null).exports;n("tcAE");var T={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"400px"},loadPlans:{type:Array,default:function(){return[]}}},data:function(){return{chart:null}},mounted:function(){var t=this;this.initChart(),this.__resizeHanlder=Object(g.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},watch:{loadPlans:function(){this.initChart()}},methods:{initChart:function(){this.chart=m.a.init(this.$el,"macarons");var t=o.a.map(this.loadPlans,"name"),e=o.a.map(this.loadPlans,function(t){var e=t.errorCount;return{name:t.name,value:e}});this.chart.setOption({title:{text:"Load Plan Error Counts"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:t},calculable:!0,series:[{top:60,name:"Error count",type:"pie",radius:[15,115],data:e,animationEasing:"cubicInOut",animationDuration:2600}]})}}},k={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height,width:this.width}})},staticRenderFns:[]},N=n("VU/8")(T,k,!1,null,null,null).exports,O={props:{blame:{type:Array,default:function(){return[]}}},data:function(){return{list:[]}},created:function(){},watch:{blame:function(){this.loadList()}},methods:{rowClassName:function(t){var e=t.row;return!o.a.chain(this.list).take(3).filter(function(t){return t.name===e.name}).isEmpty().value()?"danger":""},loadList:function(){var t=o.a.chain(this.blame).groupBy("name").value();this.list=o.a.chain(t).keys().map(function(e){return{name:e,count:t[e].length}}).sortBy(function(t){return t.count}).reverse().take(10).value()},handleTableSelect:function(){}}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{staticStyle:{width:"100%","padding-top":"15px"},attrs:{data:this.list,"max-height":"450",height:"417",fit:"fit","row-class-name":this.rowClassName},on:{"current-change":this.handleTableSelect}},[e("el-table-column",{attrs:{type:"index",width:"40"}}),e("el-table-column",{attrs:{label:"Name","min-width":"200",prop:"name"}}),e("el-table-column",{attrs:{label:"Errors","max-width":"30",align:"center",prop:"count"}})],1)},staticRenderFns:[]};var L=n("VU/8")(O,I,!1,function(t){n("G5U1")},null,null).exports,z=n("qorP");n("tcAE");var F={props:{run:{type:Object,default:function(){}},root:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"750px"}},data:function(){return{chart:void 0}},methods:{onClose:function(){this.$emit("close")},onOpen:function(){var t=this;setTimeout(function(){t.loadGraph(),t.__resizeHanlder=Object(g.a)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",t.__resizeHanlder)},10)},time:function(t){return t?d()(t).format("MMMM D hh:mm:ss a"):""},loadGraph:function(){var t={categories:[],links:[],data:[]},e=this.root;!function t(e,n,a){var r=n.name+" - "+n.stepId,i=n.name,s={};n.log&&(s={startTime:n.log.startTime,endTime:n.log.endTime,status:n.log.status,duration:n.log.duration});var l=e,c=n.stepType,d=e,u=r,h=1;d&&u&&a.links.push({source:d,target:u}),n.children&&(l=e?r:void 0,a.categories.push(e?l:r),h=n.children.length),a.data.push({_name:i,name:r,log:s,category:l,size:h,stepType:c}),o.a.forEach(n.children,function(e){t(r,e,a)})}(void 0,e,t);var n=o.a.map(t.data,function(t){var e=t.name;return{_name:t._name,name:e,value:t.log.status,symbolSize:t.size,category:t.category,draggable:"true"}}),a=o.a.map(t.categories,function(t){return{name:t}}),r=document.getElementById("run-graph-container");this.chart=m.a.init(r,"macarons");var i={backgroundColor:new m.a.graphic.RadialGradient(.3,.3,.8,[{offset:0,color:"#FFF"},{offset:1,color:"#FFF"}]),tooltip:{},legend:[{formatter:function(t){return m.a.format.truncateText(t,100,"14px Microsoft Yahei","â€¦")},tooltip:{show:!0},selectedMode:"false",bottom:5,data:t.categories}],toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:e.name,type:"graph",layout:"force",force:{repulsion:50},data:n,links:t.links,categories:a,focusNodeAdjacency:!0,roam:!0,label:{normal:{show:!0,position:"top",formatter:function(t){return t.data._name}}},lineStyle:{normal:{color:"source",curveness:0,type:"solid"}}}]};this.chart.setOption(i)}},computed:{header:function(){return this.run.loadPlanInstance.name+" - "+this.time(this.run.startTime)}},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.visible,fullscreen:"fullscreen"},on:{close:t.onClose,open:t.onOpen}},[t._v(t._s(t.header)),n("div",{ref:"container",style:{height:t.height,width:t.width},attrs:{id:"run-graph-container"}})])},staticRenderFns:[]},j=n("VU/8")(F,M,!1,null,null,null).exports,B={props:{run:{type:Object,default:function(){}}},components:{LoadPlanRunGraph:j},data:function(){return{now:d()(),loading:!1,hoverId:void 0,steps:[],filterText:"",treeProps:{children:"children"},graphVisible:!1,rootStep:{}}},mounted:function(){this.loadData()},created:function(){var t=this;setInterval(function(){t.now=new Date},1e3)},watch:{filterText:function(t){this.$refs.tree.filter(t)}},computed:r()({},Object(s.c)(["connection"]),{internalId:function(){return this.run.internalId},header:function(){return this.run.loadPlanInstance.name+" - "+this.time(this.run.startTime)}}),methods:r()({},Object(s.b)("loadPlanRun",["findOneWithLogs"]),{onGraph:function(){this.graphVisible=!0},onBack:function(){this.$emit("close")},filterNode:function(t,e){return!t||-1!==e.name.toUpperCase().indexOf(t.toUpperCase())},onReload:function(){this.loadData()},loadData:function(){var t=this,e=this.connection.id,n=this.internalId;this.loading=!0,this.findOneWithLogs({connectionId:e,internalId:n}).then(function(e){t.rootStep=e.data.loadPlanInstance.rootStep,t.steps=t.rootStep.children,t.loading=!1}).catch(function(e){console.log(e),t.loading=!1,l.Message.error("Unable to load steps!")})},time:function(t){return t?d()(t).format("MMMM D hh:mm:ss a"):""},duration:function(t,e){if(t){e||(e=this.now);var n=d.a.duration(d()(e)-d()(t));return o.a.padStart(24*n.days()+n.hours(),2,0)+":"+o.a.padStart(n.minutes(),2,0)+":"+o.a.padStart(n.seconds(),2,0)}},renderContent:function(t,e){e.node;var n=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",null,[t("span",{attrs:{title:n.stepType},style:(n.stepType,"margin-right:10px;font-size:11px;font-weight:bold;color:#42A5F5")},[function(t){if(t)return t[0].toUpperCase()}(n.stepType)]),t("span",{on:{click:function(t){return Object(z.a)(n.name,t)}}},[n.name])]),t("span",null,[t("span",{attrs:{title:"Start time"},class:"node-time"},[n.log?this.time(n.log.startTime):""]),t("span",{attrs:{title:"End time"},class:"node-time"},[n.log?this.time(n.log.endTime):""]),t("span",{attrs:{title:"Duration"},class:"node-time"},[n.log?this.duration(n.log.startTime,n.log.endTime):""]),t("span",null,[t("el-tag",{attrs:{size:"mini",type:function(t){switch(t){case"DONE":return"success";case"ERROR":return"danger";case"RUNNING":return""}return"warning"}(n.log.status)}},[n.log.status?n.log.status:"WAITING"])]),t("span",{class:"session-details"},[t("svg-icon",{attrs:{"icon-class":"list"},style:n.log.sessionId?"":"opacity:0"},[])])])])}})},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("load-plan-run-graph",{attrs:{run:t.run,root:t.rootStep,visible:t.graphVisible},on:{close:function(e){t.graphVisible=!1}}}),n("el-card",{staticClass:"box-card tree-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{margin:"auto"}},[t._v(t._s(t.header))]),n("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"danger",plain:"plain",title:"Back",icon:"el-icon-arrow-left",circle:"circle"},on:{click:t.onBack}}),n("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{disabled:t.loading,icon:"el-icon-refresh",title:"Refresh",circle:"circle"},on:{click:t.onReload}}),n("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{disabled:t.loading,icon:"el-icon-news",title:"Graph",circle:"circle"},on:{click:t.onGraph}}),n("el-input",{staticStyle:{width:"400px",float:"right",padding:"3px 0"},attrs:{disabled:t.loading,placeholder:"Search"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tree",attrs:{data:t.steps,"node-key":"stepId","render-content":t.renderContent,"expand-on-click-node":!1,props:"treeProps","filter-node-method":t.filterNode}})],1)],1)},staticRenderFns:[]};var H={name:"dashboard-admin",components:{LoadPlanLastRun:p,LoadPlanRunHistBarChart:w,LoadPlanRunHistCalChart:_,LoadPlanDurPieChart:E,LoadPlanErrPieChart:N,LoadPlanBlameList:L,LoadPlanRunDetails:n("VU/8")(B,A,!1,function(t){n("IX+J")},null,null).exports,LoadPlanRunHistTable:P},data:function(){return{loading:!1,loadPlanHistChart:1,current:{},hist:[],rowSelected:!1,blame:[],loadingBlame:!1,loadPlanRun:void 0}},methods:r()({},Object(s.b)("session",{findSessions:"findByCriteria"}),Object(s.b)("loadPlanRun",["findByLoadPlan"]),{onSetLoadPlanHistChart:function(t){this.loadPlanHistChart=t},onLoadPlanRowSelect:function(t){var e=this;if(this.connection){this.current={},this.rowSelected=!0;var n=t.loadPlanInstance.loadPlan.internalId,a=this.connection.id;this.findByLoadPlan({connectionId:a,internalId:n}).then(function(n){console.log(n.data),e.current=t,e.hist=n.data})}},laodBlameList:function(){var t=this;if(this.connection){var e=this.connection.id,n={statuses:["ERROR"]};this.loadingBlame=!0,this.findSessions({connectionId:e,criteria:n}).then(function(e){t.loadingBlame=!1,t.blame=e.data}).catch(function(e){return t.loadingBlame=!0})}}}),computed:r()({},Object(s.c)(["connection"]),Object(s.c)("loadPlan",{loadPlans:"all",loadingLoadPlans:"loadingAll"}),{currentPlanName:function(){return this.current.loadPlanInstance?this.current.loadPlanInstance.name:""},isCurrentEmpty:function(){return o.a.isEmpty(this.current)}}),watch:{connection:function(){this.laodBlameList()}},created:function(){this.laodBlameList()}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dashboard-editor-container"},[t.loadPlanRun?n("el-row",[n("el-row",{attrs:{gutter:8}},[n("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[n("load-plan-run-details",{attrs:{run:t.loadPlanRun,planName:t.loadPlanRun.loadPlanInstance.name,internalId:t.loadPlanRun.internalId},on:{close:function(e){return t.loadPlanRun=void 0}}})],1)],1)],1):n("el-row",[n("el-row",{attrs:{gutter:8}},[n("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[n("load-plan-last-run",{on:{rowSelect:t.onLoadPlanRowSelect,steps:function(e){return t.loadPlanRun=e}}})],1)],1),n("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0"}},[t.rowSelected?t._e():n("el-row",{staticClass:"empty-container"},[n("el-row",{staticClass:"icon-container",attrs:{type:"flex",justify:"center"}},[n("svg-icon",{attrs:{"icon-class":"menu","class-name":"empty-icon"}})],1),n("el-row",{staticClass:"empty-text",attrs:{type:"flex",justify:"center"}},[n("span",[t._v("Select a load plan above.")])])],1),t.rowSelected?n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.isCurrentEmpty,expression:"isCurrentEmpty"}]},[n("el-header",{staticClass:"lph-chart-header"},[n("span",{staticStyle:{color:"#606266"}},[t._v(t._s(t.currentPlanName))]),n("el-dropdown",{staticClass:"graph-options",on:{command:t.onSetLoadPlanHistChart}},[n("span",{staticClass:"el-dropdown-link"},[t._v("More"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:1}},[t._v("Bar")]),n("el-dropdown-item",{attrs:{command:2}},[t._v("Calendar")]),n("el-dropdown-item",{attrs:{command:3}},[t._v("Table")])],1)],1)],1),n("el-main",{staticClass:"lph-chart-main"},[1===t.loadPlanHistChart?n("load-plan-run-hist-bar-chart",{attrs:{loadPlanRun:t.current,hist:t.hist}}):t._e(),2===t.loadPlanHistChart?n("load-plan-run-hist-cal-chart",{attrs:{loadPlanRun:t.current,hist:t.hist}}):t._e(),3===t.loadPlanHistChart?n("load-plan-run-hist-table",{attrs:{loadPlanRun:t.current,data:t.hist}}):t._e()],1)],1):t._e()],1)],1),n("el-row",{staticStyle:{"margin-top":"32px"},attrs:{gutter:32}},[n("el-col",{attrs:{xs:24,sm:24,lg:8}},[n("el-container"),n("div",{staticClass:"chart-wrapper"},[n("load-plan-dur-pie-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingLoadPlans,expression:"loadingLoadPlans"}],attrs:{loadPlans:t.loadPlans}})],1)],1),n("el-col",{attrs:{xs:24,sm:24,lg:8}},[n("el-container"),n("div",{staticClass:"chart-wrapper"},[n("load-plan-err-pie-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingLoadPlans,expression:"loadingLoadPlans"}],attrs:{loadPlans:t.loadPlans}})],1)],1),n("el-col",{attrs:{xs:24,sm:24,lg:8}},[n("load-plan-blame-list",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBlame,expression:"loadingBlame"}],attrs:{blame:t.blame}})],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(H,Y,!1,function(t){n("PahH")},"data-v-5d1ac042",null);e.default=U.exports},hhsj:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.more-bold[data-v-4f8a95e4] {\n  font-weight: bolder;\n  cursor: pointer;\n  color: #36A3F7;\n}\n.more-fade[data-v-4f8a95e4] {\n  color: #dbcdcd;\n}\n.list-icon[data-v-4f8a95e4] {\n  font-size: 16px;\n  opacity: 0.3;\n}\n.el-table__row:hover .list-icon[data-v-4f8a95e4] {\n  opacity: 1;\n}\n.alert[data-v-4f8a95e4] {\n  color: #FF6E40;\n  font-weight: bolder;\n  /* background-color: #fef0f0; */\n}\n.pagination[data-v-4f8a95e4] {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n",""])},lsd2:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.dashboard-editor-container[data-v-5d1ac042] {\n  padding: 32px;\n  padding-bottom: 150px;\n  background-color: #f0f2f5;\n}\n.lph-chart-main[data-v-5d1ac042] {\n  padding: 0;\n  overflow: hidden;\n}\n.lph-chart-header[data-v-5d1ac042] {\n  height: unset;\n}\n.chart-wrapper[data-v-5d1ac042] {\n  background: #fff;\n  padding: 16px 16px 0;\n  margin-bottom: 32px;\n}\n.empty-icon[data-v-5d1ac042] {\n  font-size: 96px;\n  color: #BDBDBD;\n}\n.empty-container[data-v-5d1ac042] {\n  width: 100%;\n  min-height: 400px;\n  padding-top: 100px;\n}\n.empty-text[data-v-5d1ac042] {\n  margin-top: 30px;\n}\n.empty-text span[data-v-5d1ac042] {\n  font-size: 22px;\n  color: #BDBDBD;\n}\n.graph-options[data-v-5d1ac042] {\n  position: absolute;\n  right: 0;\n  margin-right: 40px;\n  cursor: pointer;\n}\n",""])},nSZa:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.el-table .danger {\n  background: #FEF0F0 !important;\n}\n\n\n",""])},oSEw:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.more-bold[data-v-4626d6de] {\n  font-weight: bolder;\n  cursor: pointer;\n  color: #36A3F7;\n}\n.more-fade[data-v-4626d6de] {\n  color: #dbcdcd;\n}\n.list-icon[data-v-4626d6de] {\n  font-size: 16px;\n  opacity: 0.3;\n  cursor: pointer;\n}\n.el-table__row:hover  .list-icon[data-v-4626d6de] {\n  opacity: 1;\n}\n.alert[data-v-4626d6de] {\n  color: #FF6E40;\n  font-weight: bolder;\n  /* background-color: #fef0f0; */\n}\n\n",""])}});